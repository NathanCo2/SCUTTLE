<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SCUTTLE: src/Core/Src/task3.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Krabby Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">SCUTTLE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a2f0e5642e47e7ed59fe0f0829eafb5f.html">Core</a></li><li class="navelem"><a class="el" href="dir_98d33a86cef786dafad53fd2007ffe4c.html">Src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">task3.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of Task 3: OPENMV Camera Interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="task3_8h_source.html">task3.h</a>&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aec54975ad344d6debdf6609298b99e89" id="r_aec54975ad344d6debdf6609298b99e89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aec54975ad344d6debdf6609298b99e89">task3_run</a> (uint8_t *State, float *<a class="el" href="main_8c.html#a420cc0573d053ec37a2d5a7f237dc02d">Distance_Target</a>, float *<a class="el" href="main_8c.html#a1f857e499dbe8541cdd4531ab2163911">Angle_Target</a>, uint8_t *<a class="el" href="main_8c.html#a388bff61f3e2048b3860f230bcfd3830">SPI_Rec</a>, uint8_t *Follow, uint8_t *OpenMV, <a class="el" href="group___u_a_r_t___exported___types.html#ga5de4a49eb132735325e706f406c69d6e">UART_HandleTypeDef</a> UART3)</td></tr>
<tr class="memdesc:aec54975ad344d6debdf6609298b99e89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the state machine for the OPENMV Camera interface.  <br /></td></tr>
<tr class="separator:aec54975ad344d6debdf6609298b99e89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5289753eb50ee3ea7446842015f62aa3" id="r_a5289753eb50ee3ea7446842015f62aa3"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5289753eb50ee3ea7446842015f62aa3">Distance_Int</a></td></tr>
<tr class="separator:a5289753eb50ee3ea7446842015f62aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad62177770aa547f5e0a1ce4e06c1cfe5" id="r_ad62177770aa547f5e0a1ce4e06c1cfe5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad62177770aa547f5e0a1ce4e06c1cfe5">Angle_Int</a></td></tr>
<tr class="separator:ad62177770aa547f5e0a1ce4e06c1cfe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27d1a599af7dd62321d992edb4c6c169" id="r_a27d1a599af7dd62321d992edb4c6c169"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27d1a599af7dd62321d992edb4c6c169">Req</a> = 0</td></tr>
<tr class="separator:a27d1a599af7dd62321d992edb4c6c169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a763e48e059d99b10646ca16a7e177df8" id="r_a763e48e059d99b10646ca16a7e177df8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a763e48e059d99b10646ca16a7e177df8">Dummy</a></td></tr>
<tr class="separator:a763e48e059d99b10646ca16a7e177df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20bdc12809518a111fff736e35e87b7" id="r_ab20bdc12809518a111fff736e35e87b7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab20bdc12809518a111fff736e35e87b7">Buffer</a> [9]</td></tr>
<tr class="separator:ab20bdc12809518a111fff736e35e87b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of Task 3: OPENMV Camera Interface. </p>
<p>NOTE: THIS CODE IS INCLUDED FOR COMPLETENESS, BUT IS NOT USED IN THE IMPLEMENTATION OF THIS PROJECT This file contains the implementation of the state machine for interfacing with the OPENMV camera. It includes functions to request, receive, and process distance and angle data from the camera via UART.</p>
<dl class="section date"><dt>Date</dt><dd>Jun 5, 2024 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>tawel </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aec54975ad344d6debdf6609298b99e89" name="aec54975ad344d6debdf6609298b99e89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec54975ad344d6debdf6609298b99e89">&#9670;&#160;</a></span>task3_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task3_run </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>State</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>Distance_Target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>Angle_Target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>SPI_Rec</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>Follow</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>OpenMV</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___u_a_r_t___exported___types.html#ga5de4a49eb132735325e706f406c69d6e">UART_HandleTypeDef</a></td>          <td class="paramname"><span class="paramname"><em>UART3</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the state machine for the OPENMV Camera interface. </p>
<p>This function implements the state machine for interfacing with an OPENMV camera via UART. It manages the process of requesting, receiving, and processing distance and angle data from the camera.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">State</td><td>Pointer to the state variable of the state machine. </td></tr>
    <tr><td class="paramname">Distance_Target</td><td>Pointer to the variable where the target distance will be stored. </td></tr>
    <tr><td class="paramname">Angle_Target</td><td>Pointer to the variable where the target angle will be stored. </td></tr>
    <tr><td class="paramname">SPI_Rec</td><td>Pointer to the SPI receive flag variable. </td></tr>
    <tr><td class="paramname">Follow</td><td>Pointer to the follow mode flag variable. </td></tr>
    <tr><td class="paramname">OpenMV</td><td>Pointer to the OPENMV mode flag variable. </td></tr>
    <tr><td class="paramname">UART3</td><td>UART handle for communication with the OPENMV camera. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad62177770aa547f5e0a1ce4e06c1cfe5" name="ad62177770aa547f5e0a1ce4e06c1cfe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad62177770aa547f5e0a1ce4e06c1cfe5">&#9670;&#160;</a></span>Angle_Int</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Angle_Int</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Angle received from OPENMV </p>

</div>
</div>
<a id="ab20bdc12809518a111fff736e35e87b7" name="ab20bdc12809518a111fff736e35e87b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20bdc12809518a111fff736e35e87b7">&#9670;&#160;</a></span>Buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Buffer[9]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buffer to store data received via UART </p>

</div>
</div>
<a id="a5289753eb50ee3ea7446842015f62aa3" name="a5289753eb50ee3ea7446842015f62aa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5289753eb50ee3ea7446842015f62aa3">&#9670;&#160;</a></span>Distance_Int</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Distance_Int</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Distance received from OPENMV </p>

</div>
</div>
<a id="a763e48e059d99b10646ca16a7e177df8" name="a763e48e059d99b10646ca16a7e177df8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a763e48e059d99b10646ca16a7e177df8">&#9670;&#160;</a></span>Dummy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Dummy</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dummy value used for debugging </p>

</div>
</div>
<a id="a27d1a599af7dd62321d992edb4c6c169" name="a27d1a599af7dd62321d992edb4c6c169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27d1a599af7dd62321d992edb4c6c169">&#9670;&#160;</a></span>Req</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Req = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag indicating if SPI request is pending </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
